<!-- ================= DESKTOP / TABLET HEADER ================= -->
<header class="header-container hidden sm:block dark:bg-gray-900">
  <div class="flex flex-col items-center">
    <!-- Top Section: Logo and Icons -->
    <div class="flex justify-between items-center w-full max-w-7xl px-4">
      <!-- Empty div to balance the space and center the logo -->
      <div class="flex-1 hidden md:block"></div>

      <div class="flex-1 logo-section flex justify-center">
        <!-- Logo and text -->
        <a [routerLink]="appRoutes.HOME">
          <div class="flex flex-col items-center">
            <!-- <img src="assets/images/logo-indraprasth.png" alt="Indraprastha Logo" class="w-[90px]"> -->
            <img
              src="assets/images/logo-indraprasth.svg"
              alt="Indraprastha Logo"
              class="w-[90px]"
            />
          </div>
        </a>
      </div>

      <div class="flex-1 top-right-icons flex justify-end items-center space-x-6">
        <button (click)="updateSearchInputVisibility()" class="nav-link cursor-pointer">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="sm:h-4 sm:w-4 lg:h-6 lg:w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
        </button>
        <a [routerLink]="appRoutes.WISHLIST" class="nav-link relative">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="sm:h-4 sm:w-4 lg:h-6 lg:w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
            />
          </svg>
          @if(wishlistService.wishlistCount()){
          <span
            class="icon-button-badge absolute flex justify-center align-center sm:h-[14px] sm:w-[14px] lg:h-[18px] lg:w-[18px] top-[-8px] right-[-8px] bg-[#df1800] text-white rounded-[50%] sm:text-[10px] lg:text-[12px] font-semibold"
            >{{ wishlistService.wishlistCount() }}</span
          >
          }
        </a>

        @if(_utitlityService.isUserLoggedIn()){
        <div class="relative">
          <a (click)="toggleDropdown()" class="nav-link cursor-pointer"
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              class="sm:h-4 sm:w-4 lg:h-6 lg:w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              /></svg
          ></a>
          <!-- @if(dropdownOpen){ -->
          <div
            class="absolute w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-50 duration-500 ease-in-out right-[-70px]"
            [ngClass]="
              dropdownOpen ? 'visible opacity-100 top-[30px]' : 'opacity-0 invisible top-[70px]'
            "
          >
            <a
              (click)="logout()"
              class="block px-4 py-2 text-gray-700 rounded-t-lg cursor-pointer relative before:content-[''] before:absolute before:w-0 before:h-0 before:border-l-[15px] before:border-l-transparent before:border-r-[15px] before:border-r-transparent before:border-b-[10px] before:border-b-[#ffff] before:top-[-5px] before:left-1/2 before:-translate-x-1/2 before:transform"
              >Logout</a
            >
            <button
              (click)="openProfile()"
              class="block px-4 py-2 text-gray-700 rounded-t-lg cursor-pointer relative before:content-[''] before:absolute before:w-0 before:h-0 before:border-l-[15px] before:border-l-transparent before:border-r-[15px] before:border-r-transparent before:border-b-[10px] before:border-b-[#ffff] before:top-[-5px] before:left-1/2 before:-translate-x-1/2 before:transform"
            >
              Profile
            </button>
            <a
              class="block px-4 py-2 text-gray-700 rounded-t-lg cursor-pointer relative before:content-[''] before:absolute before:w-0 before:h-0 before:border-l-[15px] before:border-l-transparent before:border-r-[15px] before:border-r-transparent before:border-b-[10px] before:border-b-[#ffff] before:top-[-5px] before:left-1/2 before:-translate-x-1/2 before:transform"
              >My Order</a
            >
          </div>
          <!-- } -->
        </div>
        }@else {
        <a (click)="openAuthForm()" class="nav-link cursor-pointer"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            class="sm:h-4 sm:w-4 lg:h-6 lg:w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            /></svg
        ></a>
        }

        <!-- Cart Button -->
        <a (click)="openCart()" class="nav-link relative shopping-cart cursor-pointer">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="sm:h-4 sm:w-4 lg:h-6 lg:w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"
            />
          </svg>
          @if(cartService.cartCount()){
          <span
            class="icon-button-badge absolute flex justify-center align-center sm:h-[14px] sm:w-[14px] lg:h-[18px] lg:w-[18px] top-[-8px] right-[-8px] bg-[#df1800] text-white rounded-[50%] sm:text-[10px] lg:text-[12px] font-semibold"
            >{{ cartService.cartCount() }}</span
          >
          }
        </a>
      </div>
    </div>

    <!-- Bottom Section: Nav Menu -->
    <nav class="nav-section mt-4 w-full">
      <ul
        class="flex justify-center space-x-8 sm:text-xs lg:text-sm font-medium sm:gap-[30px] lg:gap-[45px]"
      >
        <li>
          <a
            [routerLink]="appRoutes.WHATS_NEW"
            class="nav-link hover:text-gray-900 transition-colors"
            >WHAT'S NEW</a
          >
        </li>
        <li><a href="#" class="nav-link hover:text-gray-900 transition-colors">COLLECTIONS</a></li>

        <li
          class="relative group cursor-pointer"
          (mouseenter)="setGender(GenderTypeEnum.Women)"
          (mouseleave)="clearGender()"
        >
          <a class="nav-link hover:text-gray-900 transition-colors">WOMEN'S WEAR</a>
        </li>

        <li
          class="relative group cursor-pointer"
          (mouseenter)="setGender(GenderTypeEnum.Men)"
          (mouseleave)="clearGender()"
        >
          <a class="nav-link hover:text-gray-900 transition-colors">MEN'S WEAR</a>
        </li>

        <!-- Single shared dropdown -->

        @if(activeGender()){
        <div
          animate.enter="dropdown-menu"
          animate.leave="close"
          (mouseenter)="setGender(activeGender())"
          (mouseleave)="clearGender()"
          class="absolute z-10 left-1/2 transform -translate-x-1/2 mt-[30px] sm:w-[700px] lg:w-[1200px] bg-white rounded-lg shadow-2xl py-2"
        >
          <!-- <app-gender-menu [genderType]="activeGender()"></app-gender-menu> -->
          <app-gender-menu [(genderType)]="activeGender"></app-gender-menu>
        </div>
        }
        <!-- <li class="relative group"><a class="nav-link hover:text-gray-900 transition-colors" (mouseenter)="setGender('men')" (mouseleave)="clearGender()">MEN'S WEAR</a></li> -->
        <li [routerLink]="appRoutes.ABOUT_US">
          <a class="nav-link hover:text-gray-900 transition-colors cursor-pointer">ABOUT US</a>
        </li>
      </ul>
    </nav>
  </div>
  <!-- Search Bar -->
  <div id="search-box-container" class="search-container">
    <!-- Search input section -->
    <div class="relative flex items-center p-2">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 20 20"
        fill="currentColor"
        class="w-5 h-5 text-gray-500 mr-2"
      >
        <path
          fill-rule="evenodd"
          d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.095l3.857 3.858a1 1 0 01-1.414 1.414l-3.858-3.857A7 7 0 012 9z"
          clip-rule="evenodd"
        />
      </svg>
      <input
        type="text"
        id="search-input"
        class="search-input w-full bg-transparent text-gray-800 placeholder-gray-500"
        placeholder="Search"
      />
    </div>
  </div>
</header>

<!-- ================= MOBILE HEADER ================= -->
<header class="block sm:hidden sticky top-0 z-1000">
  <!-- Top bar -->
  <div class="flex items-center justify-between px-4 py-3 border-b bg-[#FEF5E0] sticky top-0 z-100">
    <!-- Hamburger / Close button -->
    <button
      id="mobile-menu-button"
      aria-expanded="false"
      aria-controls="mobile-menu"
      class="relative z-[60] focus:outline-none"
    >
      <!-- Hamburger -->
      <svg
        id="hamburger-icon"
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 block"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
      <!-- Close -->
      <svg
        id="close-icon"
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 hidden"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>

    <!-- Logo -->
    <a [routerLink]="appRoutes.HOME" class="flex justify-center">
      <img src="assets/images/logo-indraprasth.svg" alt="Indraprastha Logo" class="w-[70px]" />
    </a>

    <!-- Right icons -->
    <div class="flex items-center space-x-4">
      <!-- Top-right icons -->
      <a [routerLink]="appRoutes.WISHLIST" class="nav-link relative">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 lg:h-6 lg:w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
          />
        </svg>
        <span
          class="icon-button-badge absolute flex justify-center align-center h-[14px] w-[14px] lg:h-[18px] lg:w-[18px] top-[-8px] right-[-8px] bg-[#df1800] text-white rounded-[50%] text-[10px] lg:text-[12px] font-normal md:font-semibold"
          >1</span
        >
      </a>
      <!-- Cart Button -->
      <a (click)="openCart()" class="nav-link relative shopping-cart cursor-pointer">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 lg:h-6 lg:w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"
          />
        </svg>
        <span
          class="icon-button-badge absolute flex justify-center align-center h-[14px] w-[14px] lg:h-[18px] lg:w-[18px] top-[-8px] right-[-8px] bg-[#df1800] text-white rounded-[50%] text-[10px] lg:text-[12px] font-normal md:font-semibold"
          >2</span
        >
      </a>
    </div>
  </div>

  <!-- Overlay -->
  <div id="menu-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>

  <!-- Slide-in Menu (RIGHT SIDE) -->
  <!-- Slide-in Menu (RIGHT SIDE) -->
  <aside
    id="mobile-menu"
    class="fixed top-0 right-0 h-full w-3/4 max-w-xs bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50"
  >
    <div class="px-4 py-6 space-y-4">
      <!-- Example with Submenu -->
      <div class="border-b">
        <button class="w-full flex items-center justify-between px-2 py-2 submenu-toggle">
          <span>WHAT'S NEW</span>
          <span class="icon text-xl">+</span>
        </button>
        <div class="submenu max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
          <a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-100"
            >New Arrivals</a
          >
          <a href="#" class="block px-4 py-2 text-sm text-gray-600 hover:bg-gray-100">Trending</a>
        </div>
      </div>

      <!-- Normal Links -->
      <a href="#" class="block px-2 py-2 border-b">COLLECTIONS</a>
      <a href="#" class="block px-2 py-2 border-b">WOMEN'S WEAR</a>
      <a href="#" class="block px-2 py-2 border-b">MAN'S WEAR</a>
      <a href="#" class="block px-2 py-2">ABOUT US</a>
    </div>
  </aside>
</header>

@if(isSearchInputVisible()){
<div class="w-full absolute">
  <label for="search" class="block mb-2.5 text-sm font-medium text-heading sr-only">Search</label>
  <div class="relative">
    <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
      <svg
        class="w-4 h-4 text-body"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-width="2"
          d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"
        />
      </svg>
    </div>
    <input
      type="search"
      id="search"
      class="block w-full p-3 ps-9 bg-[#f0f8ff] focus:outline-none focus:ring-0 focus:border-transparent text-heading text-sm rounded-base placeholder:text-body"
      placeholder="Search"
      (keyup.enter)="search($event)"
      [(ngModel)]="searchText"
    />
  </div>
</div>
}

<app-shopping-cart #shoppingCartRef></app-shopping-cart>
<app-auth-manager #authFormRef></app-auth-manager>

@if(isProfileMounted()){
<app-profile (removeFromDom)="removeFromDom()"></app-profile>
}

<!-- <app-profile [showProfileBar]="showProfileBar"></app-profile> -->
