@if(showProfileBar()){
<div
  class="fixed top-0 left-0 w-full h-full z-[1000]"
  animate.enter="slide-in"
  animate.leave="slide-out"
>
  <div class="fixed inset-0 bg-white opacity-50 transition-opacity duration-500 z-40"></div>

  <div
    class="drawer fixed top-0 right-0 w-full md:w-[35%] h-full bg-white shadow-2xl flex flex-col z-50"
  >
    <div class="flex justify-between items-center p-6 border-b border-gray-200">
      <h2 class="text-lg font-bold uppercase tracking-widest">PROFILE INFORMATION</h2>
      <button class="text-gray-500 hover:text-gray-800 text-2xl cursor-pointer" (click)="close()">
        &times;
      </button>
    </div>

    <div class="flex-1 overflow-y-auto p-6">
      <!-- Profile Card -->
      <div class="bg-[#f7f7f7] rounded-2xl p-5 space-y-2">
        <div class="flex justify-between items-start">
          <p class="font-semibold text-[17px]">
            {{ utilityService.profileData()?.firstName }}
            {{ utilityService.profileData()?.lastName }}
          </p>
          <button class="cursor-pointer text-md" (click)="upsertInfo(0)">
            <img src="assets/icons/bxs_edit.svg" />
          </button>
        </div>

        <p class="text-sm text-gray-500">Email</p>
        <p class="text-[15px]">{{ utilityService.profileData()?.email }}</p>
      </div>

      <!-- Address Card -->
      <div
        class="bg-[#f7f7f7] rounded-t-2xl p-5 mt-4"
        [ngClass]="isShown() ? 'rounded-b-none' : 'rounded-b-2xl'"
      >
        <!-- Header Row -->
        <div class="flex justify-between items-center">
          <p class="font-semibold text-[17px]">Address</p>

          <div class="flex items-center gap-4">
            <!-- Add Button -->
            <button
              class="text-red-600 font-medium text-sm cursor-pointer"
              (click)="upsertAddress()"
            >
              + Add
            </button>

            <!-- Toggle Icon -->
            <button
              (click)="toggle()"
              class="cursor-pointer flex items-center justify-center w-6 h-6 rounded-full border border-gray-400 hover:bg-gray-200 transition"
            >
              {{ isShown() ? '-' : '+' }}
            </button>
          </div>
        </div>

        @for (item of utilityService.AddressData(); track $index) { @if($index == 0){
        <div class="p-4 rounded-md border border-gray-200 bg-white shadow-sm mt-3">
          <h3 class="font-bold text-gray-800 mb-2">Address {{ $index + 1 }}</h3>

          <div class="flex flex-wrap gap-2 text-gray-700 text-sm mb-1">
            <span>{{ item.country }}</span> • <span>{{ item.state }}</span> •
            <span>{{ item.city }}</span> •
            <span>{{ item.email }}</span>
          </div>

          <p class="text-gray-600">{{ item.address }}</p>
          <p class="text-gray-600">{{ item.apartment }}</p>
          <p class="text-gray-600">Pin Code: {{ item.pinCode }}</p>
          <p class="text-gray-600">Contact: {{ item.contact }}</p>
        </div>
        } }
      </div>

      @if (isShown()) {
      <div
        class="bg-[#f7f7f7] rounded-b-2xl rounded-t-none p-5 pt-0"
        animate.enter="address-enter"
        animate.leave="address-leave"
      >
        <!-- Address list -->
        @for (item of utilityService.AddressData(); track $index) { @if($index > 0){
        <div class="p-4 rounded-md border border-gray-200 bg-white shadow-sm mb-3">
          <h3 class="font-bold text-gray-800 mb-2">Address {{ $index + 1 }}</h3>

          <div class="flex flex-wrap gap-2 text-gray-700 text-sm mb-1">
            <span>{{ item.country }}</span> • <span>{{ item.state }}</span> •
            <span>{{ item.city }}</span> •
            <span>{{ item.email }}</span>
          </div>

          <p class="text-gray-600">{{ item.address }}</p>
          <p class="text-gray-600">{{ item.apartment }}</p>
          <p class="text-gray-600">Pin Code: {{ item.pinCode }}</p>
          <p class="text-gray-600">Contact: {{ item.contact }}</p>
        </div>
        } }
      </div>
      }
    </div>
  </div>
</div>

}
