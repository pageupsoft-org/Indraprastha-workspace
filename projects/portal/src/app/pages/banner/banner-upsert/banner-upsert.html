<!-- Banner Form -->

<form [formGroup]="bannerForm"
  class="grid gap-4 grid-cols-1 md:grid-cols-3 p-6 bg-white rounded-xl shadow-sm border border-slate-200">
  <!-- Header -->
  <div class="md:col-span-3 flex items-center justify-between mb-2">
    <div>
      <h2 class="text-xl font-semibold text-slate-800 text-center">Add Banner</h2>
    </div>
  </div>

  <!-- Row 1 -->
  <div>
    <label class="block text-sm font-medium text-slate-700 mb-1">Name</label>
    <input formControlName="name" type="text" placeholder="Enter name" minlength="3" maxlength="20"
      [appErrorHandler]="bannerForm.controls.name"
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-200" />
  </div>

  <div>
    <label class="block text-sm font-medium text-slate-700 mb-1">Banner Connection Type</label>
    <select formControlName="bannerConnectionType" (change)="selectBannerConnectionType()"
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200">
      <option value="" disabled selected>choose banner type</option>
      @for (item of bannerConnectionTypes; track $index) {
      <option [ngValue]="item.value">{{ item.value }}</option>
      }
    </select>
  </div>

  <div>
    <label class="block text-sm font-medium text-slate-700 mb-1">Banner Type</label>
    <select formControlName="bannerType"
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200">
      @for (item of bannerTypes; track $index) {
      <option [ngValue]="item.key">{{ item.value }}</option>
      }
    </select>
  </div>

  <!-- Row 2 -->
  <div>
    <label class="block text-sm font-medium text-slate-700 mb-1">Gender</label>
    <select formControlName="gender"
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200">
      <option selected disabled>-- Select Gender --</option>
      @for (item of genders; track $index) {
      <option [ngValue]="item.key">{{ item.value}}</option>
      }
    </select>
  </div>

  <!-- Category -->
  <div>
    <label class="block text-sm font-medium text-slate-700 mb-1">{{selectConnectionType}}</label>
    <select formControlName="bannerValueId" (change)="setBannerValue()"
      [ngClass]="{ 'bg-slate-100 text-slate-500': bannerForm.get('bType')?.disabled }"
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-200">
      @if(selectConnectionType === 'Category'){
      <option selected disabled>Choose Category</option>
      @for (item of combo; track $index) {
      <option [ngValue]="item.id">{{item.name}}</option>
      }
      }
      @else if(selectConnectionType === 'Product'){
      <option selected disabled>Choose Product</option>
      <option value="1">women</option>
      <option value="2">men</option>
      <option value="3">kids</option>
      }
      @else {
      <option>Choose bannerConnectionType</option>
      }
    </select>
  </div>

  <!-- Banner Value ID (readonly, styled when disabled) -->
  <!-- <div>
    <label class="block text-sm font-medium text-slate-700 mb-1">Banner Value ID</label>
    <input type="number"  formControlName="bannerValueId" 
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-200" />
  </div> -->

  <!-- Description -->
  <div class="md:col-span-3">
    <label class="block text-sm font-medium text-slate-700 mb-1">Description</label>
    <textarea formControlName="description" rows="3" placeholder="Write short description..." minlength="20"
      maxlength="200" [appErrorHandler]="bannerForm.controls.description"
      class="w-full border border-slate-200 rounded-lg px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-indigo-200"></textarea>
  </div>

  <!-- Row 4 (File + Preview) -->
  <!-- Banner Image Upload Section -->
  <div
    class="md:col-span-2 border border-slate-200 rounded-2xl p-6 bg-white shadow-sm hover:shadow-md transition duration-300">
    <label class="block text-sm font-semibold text-slate-700 mb-4"> Banner Image </label>

    <div class="flex flex-col sm:flex-row items-center gap-6">
      <!-- File Upload -->
      <div class="flex-1 w-full">
        <input type="file" accept="image/*" (change)="onImageChange($event)" 
          class="block w-full text-sm text-slate-700 border border-slate-300 rounded-lg p-2.5 cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 transition" />
      </div>

      <!-- Image Preview Box -->
      <div
        class="w-32 h-32 flex items-center justify-center border-2 border-dashed border-slate-300 rounded-xl bg-gray-50 overflow-hidden hover:border-indigo-300 transition">
        <!-- Preview Image -->
        <img src="https://via.placeholder.com/150" alt="Preview" class="w-full h-full object-cover rounded-lg" />

        <!-- Placeholder when no image -->
        <!-- <span class="text-xs text-slate-400">No image</span> -->
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="md:col-span-3 flex justify-end gap-3 mt-4">
    <button type="button" (click)="onCancel()"
      class="px-5 py-2 border border-slate-300 rounded-lg text-sm text-slate-700 hover:bg-slate-100 cursor-pointer">
      Cancel
    </button>
    <button type="submit" (click)="onBannerSubmit()"
      class="px-5 py-2 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 cursor-pointer">
      Save
    </button>
  </div>
</form>